from functools import reduce

slope_input = [
    '.#..........#......#..#.....#..','....#.............#.#....#..#..','.....##...###....#..#.......#..','.#....#..#......#........#.....','.#.........###.#..........##...','...............##........#.....','#..#..........#..##..#....#.#..','....#.##....#..#...#.#....#....','...###...#............#.#......','#.........#..#...............#.','#.#...........#...............#','..#.#......#..###.#...#..##....','.....#..#..#..#............#...','......#.......#.....#....##....','#......#...#.......#.#.#.......','...........##.#.............#..','.#.........#..#.####...........','..#...........#....##..........','#...........#.......#..#.#.....','.....##...#.....#..##..#..#....','#.#..........................#.','##.....#..........#.......##..#','....#..#............#.#.#......','.......#.......#..#............','...#.#..........#..#.....#.....','.....#...##..##.....##........#','.#.....#........##............#','..#....#.#...#.....#.##........','........##.....#......##...##..','......#..................#.....','..##......##.....##...##.......','......#..#...##......##........','.#..#..#.#.....................','.#....#.#...#....#.......##...#','.####.#..##...#.#.#....#...#...','.#....#.....#...#..#.........##','...........#.#####.#.#..##..#..','.#......##...#..###.#.#....#...','...#.....#........#..###...#...','.......#................##.#...','.##...#.#..................#...','..#........#....#..........#..#','..#.........#..................','...#.#..........#.#..##........','...#.##..........##...........#','...........#..#........#.......','.#....#.#...........#....#.##..','.#...#..#............#....#.#..','...#..#...#.........####.#.#...','..#...#...........###..#...##.#','......##...#.#.#....##....#....','#..#.#.....##....#.......#...#.','.#.....#.....#..#..##..........','................#.#.#...##.....','.#.....#............#......#...','...#...#..#.#....######.....#..','..#..........##......##.....#..','......#..#.##...#.#............','....#.......#..#...#..#.#......','#......##.#..#........#.....#..','..#.........#..#.........#.....','..#.........##.......#.#.#..##.','...#....##.................#.#.','...#........##.#.......#.##..##','....#.#...#...#....#...........','.........#....##........#......','...#........#..#.......#...#...','#.......#....#...#...........#.','.......#......#...##...........','.#.#......##.#.......#..#...#..','.#.....##.#...#......#..#......','........#.............#.#..#..#','#...........#....#.....#.##.#.#','................#...#........##','#..#.##..#.....#...##.#........','#.....#.#..##......#.#..#..###.','....#...#.....#................','......#...#..##...........#....','......#.........##.#...#......#','#...#.#.....#..#.#..#..#......#','...#.#..#..#.#........###.#....','..#...#.......#.#.......#......','...#....#.....#.......#......#.','#...........#....#..#..#.......','..........##......##.........##','##............#..#.#...#..#.#..','..#.##....##...##..#...#.......','............##.##..###..#..#...','......#....##...##.........#...','......#..#.#......####..#......','..............#....#..#..##....','...#.#..#...##.#.......#.#.....','...#.#....#.......#..#..#..##..','..........#.........#..........','...#.....#............#.....##.','....#.#......................#.','.........#...#.#...#...........','...#........#..##.....#...#.#..','......##.....#.#..#...###.#...#','#....#..#.#.....#...#..........','.#.##.###.........#..##.#....#.','#.........#....#........#...#..','...........#...............#..#','###....................#....#..','.................#....#.....#..','..........#.........#.......#..','........#..#....#.....##.......','#...##.#...#.#.#............#..','....#.........##.#.#..#...###..','.##..............#...#.....##.#','###...#..................#...#.','.....#..#...#..#...#...........','.#.................#...#..#..#.','.#.........###...#.##......###.','.####............#......#..#...','....#........#..#.#....#..##..#','..#....#.#...#.#.....##....#...','..###..#..#....##....#..#..#...','...#.#.....#.#....#.....#......','.....#..........#.#............','.......#...........#.#..#..#...','......##........#.....#.......#','..#.#.....##............#..##..','....#.#........#...........##..','#......#..##........#.....#....','#...#...###..............##....','#..#........#........#.....##.#','......##.####........#..#....#.','...##..#.##.....#...#...#..#...','#..............###.##..##......','......................#.....#..','.........#.#.......#...##.#....','....#......#..........###..#...','#...####.#.................#..#','##.#....#....#.....##..#....#.#','..#.....#..##.........#.#..#.#.','.....#.....#...................','#....##.#.........###....#.....','#........#.#.......#.#.........','.##.#...#.....#...#.......##.##','#..#.............#.............','..........#.........####.......','..##..............#..#.#.......','..#.#.....#........#......##...','#.#.......#.#................#.','.#...#........#....##....#.##..','.#..#...#...#......#.#.........','......##............#.........#','.#....#.#.#.........#..#..##...','#....#......#.......###........','.......#........##..#...#..###.','#.##..........#..###..#..#.#...','.#..#....#..........#.#.##.....','#..#...#.#...#..#..#.#...#.....','.........#...#.#............#..','#..#.............#......##.##..','...##.......#..................','....#......#...#.....#......#..','.....##..#......#....#....#....','....#...#...#...#.....#........','.#....#........##....#..#.#...#','#.......#..#......#......#...#.','..............#......#......#..','#......#..##...#........#....#.','#..#..#..#.....#..#........#...','#...#.....#...#..........#...##','........#.......#...#.....#.#..','...................##.......#..','.#......#........#.##..#....#..','.....#.....#...#..#..#......#..','........##.#..##.........#....#','.........#.......#.............','............#.###.###..#.#.....','.............#....#...........#','..#.....#.#..##.##........#....','...#....#....#.........#.....#.','.#............#......#.........','..#.#..........##.##......#.#..','....#.........................#','..........##...................','#.......#.#..............#...#.','...##..#..##...##.#..#.#.#.....','...########.#..##....#.........','##.#........##.....#........#..','#.#.....#........#..#....#...#.','..#............#.......###.##.#','#.#............................','...#.#.#....#..........#..#....','..###.#.....#.#..#.............','#........#..........#.#..#.....','...........#..#....#.........#.','..#............#.....#.#.......','#.#............#..#.....#.#.#..','...#...#.......................','.#.#.#...##.............#..#..#','..#.........#..#.....##....##..','.#...#............#.......#..##','....#..#.#.#...####............','#.......#....#..##....##....#..','.....##.#....#.#..#.......#....','...........#.......#....##.#.##','..........#...#....##...#.#....','..#.............#.............#','....#..#.....#....#.#..###.#...','.......#.##.#......#...##...#.#','.#..#.#..#.#.......#....###.#..','#..........##...##.........##..','##..#......##.#.####.#.....#...','....#.#...#........#..##..#.#..','.#.............................','.##..#.#...##.....#....#.....#.','..##.........#......#.........#','.#.#........#...#.#.#....##....','.#.................##.........#','...#...............#....#......','..#...#..#..........###..#...##','..........#..#..........##..#..','...#.............#.##.#...#....','...#...........#...............','......#.........##.#...#...#...','...#.#........#..#.....#..#...#','#.#...#....##...#.....#....#...','#.#.#..#.....#.........#.......','##...........#..####...........','#..........#........###...#..#.','#..#.......#....#......###.....','..#.....#......#.###......##...','...#.##..#............#...#....','.##........#.....#.............','#....#.##..#...........##.#.#..','..#.....#.#....#.......#......#','#..#.......#............#......','#.......##....#...#..#.........','.................#..##.........','..............#..#..#.##.......','#.#.......................#..#.','..#..##...........#....#..#..#.','...#....#.......#.......#....#.','.....#.#..#.#.....#.........#.#','..#.#.........#.....#..........','...#.#.#.......#.#.......#.#..#','...##...#.#.#.....#.....##....#','##.......#.#.#.#.......#...##..','....#.#...........#......#.....','.#.....#........####...........','#......#........#.....#..#..#..','..#..#......#...##.......#....#','#........#..........#.....#.#..','.#...........#.....#.....#.....','..........#..#...#....#....##..','.....#.#..........#.....##..#..','......#.........##.............','..#..#.....##......##........#.','.#.#.#.#..#.#..#.......#.......','#.#...####.#.#....#.#........#.','....#...#.....#......#..##.....','##.........#.........#..#.#..#.','..#.#........#.#........#.##...','#....#......#...#....#.........','.##.............###....###.#...','..##.#.......#...#..#......#...','.....#.##..................#...','.....#.#...#..#................','........#..#..#...........#.#.#','....#.###.....#..#.#.....##..##','....##.#.........#..##.........','.##........#......#..###..#.##.','.........##...............#.##.','..#...............#.#...#..#.#.','....#....##.....#...#..#.....#.','#...#.....................#....','.....#.#............#...##.#.#.','...#......#.......#........##.#','.#.#..#.#....#.##.......##....#','.........#...#..##.........#...','.#...#..#....................#.','.......#...#........#.#..#.#.##','.#.............#......#..#.#...','............##.........#....#.#','#.........##..##...............','.#.#....#.#..#..........##.....','..###...#..#.#.......#..#...##.','.....#....#.#............##.#..','##.....#.#..#..#...............','...##...#......#....#..#..#....','.............#....#..#..##...##','#.......#............#....##..#','..#.##.....#.......#....#....#.','..........#...#.............###','..#....#.#..................#..','#.#...#..#...........#.........','....##..#..##..#..........#....','#...#...#.#....#.##...#.......#','#......##.#...##..#.....#......','....#.......#.#............#...','#....#...........###...........','#..#...#...#......#.#..#.......','...............................','#........##.............#.#....','.............#........#....#.##','........##.####.....##..#......','#.#.#.#.......##....##.....#...','.......#..##..#...#............','..........#...#....#..#.#.#.##.','...#........##....#...#........','#..#.##....#....#........#.....','.##...#.....##...#.............','.#...#..#.#.....#.##.....#.....','...........#.............#...#.','.#..#................#...#..#..','#..........#......##..##....#..','####..#...........#.#....#.....','..#.#.##..#...##........#....##','.#.......##........#.....#.....','............#................#.','.#...#...#.....#.#....#.##..#..','..#.............#.#....#.#.....','..............#...........#....','..............#........#....#..','..........##........#..#...#...','...#.#....#.#....#..#.....#...#','..#......#...........#..#..#.#.','.....##.....#.####....#........',
    ]

slope_array = []

for row in slope_input:
    slope_array.append([char for char in row])
    
width = len(slope_array[0])
height = len(slope_array)

def traverse_slope(across, down):
    
    x = y = 0
    tree_count = 0

    while y <= height - 2:
        x += across
        y += down
        if x >= width:
            x -= width
        if slope_array[y][x] == '#':
            tree_count += 1

    return tree_count

moves = [(1, 1), (3, 1), (5, 1), (7, 1), (1, 2)]

results = [traverse_slope(across, down) for (across, down) in moves]

total = reduce((lambda x, y: x * y), results)

print(total)
